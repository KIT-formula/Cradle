# 形状の準備
## 形状のインポート
1. 画面上部のタブ「選択 -> primeモード」を選択してprimeモードに移行する。
2. 用意したCADデータをドラッグ＆ドロップするか、「部品の追加」から追加する。  
![importCAD](https://github.com/KIT-formula/Cradle/blob/image/importCAD.jpg)
3. 形状が.X_T形式に変換されてCradle上にインポートされる。  
※再度、同じ形状を取り込む際はこの形式をインポートすることで変換にかかる時間が短縮できる。

## 空気を新規作成する
1. 新規作成は「部品の追加」ではなく「新しい形状の作成」を選択。
2. 必要なパラメータを入力して作成する。
※CADであらかじめ用意しといたほうが作業が楽になる。

## 形状セットを作成する
1. 「形状グループの設定」を選択。
2. グループ別に形状セットを作成する。 → 解析結果を見たい形状ごとに分けるといい。  
![group](https://github.com/KIT-formula/Cradle/blob/image/gropesetting.jpg)

## 部品の準備
準備をする形状セットを選択する。  
インポートしたままの形状は複雑な為、解析が非常に重くなったりエラーが出まくったりと良いことがない。  
Cradleにはそれを回避する為に、表面を滑らかにする機能がある。  

- そのままの形状で解析する場合

1. 「領域の認識」を選択
2. 「解析領域の認識」で「チェック開始」を押す
3. 「MDLの作成」を選択
4. 「MDLの作成」を選択し、忠告された場合はされなくさるまで「すべてクリーニング」を実行する. 
5. 問題が無ければ完成

- 形状を滑らかにする場合
1. 「（ラッピング）に変更」を選択
2. 「ラッピング粗密の設定」を選択し、最小/最大オクタントサイズを入力し、OKを選択  
  →だいたいどっちも0.01くらい
3. 「ラッピングの実行」を選択し、なにもせずOKを選択

全ての形状セットに対して上記の２パターンを実行すると次の作業に進める。

## 干渉の除去
干渉の（深刻な）エラーがなくなるまで「すべてクリーニング」を選択する。  

## 閉空間・領域の設定（形状）
ここで設定した領域が解析結果として吐かれる。

1. 「領域ダイアログを開く」を選択
2. ダイアログ上部の「閉空間」に切り替える（たぶん既に切り替わってる）
3. 表示されている閉空間のなかで、体積が異常に高いもののMAT番号を解除する（次で再度使うので覚えておく）
4. 表示されている閉空間のなかで、体積が負の値になっているもの（空気です）にさっき解除した番号を割り当てる
5. ダイアログ上部の「面領域」に切り替える
6. 空気以外の領域を登録していく

- MAT番号で登録する場合（基本こっち）
  1. 「登録の対象」を「指定したMATの表面」に切り替える
  2. 体積をヒントにしながら登録していく。複数選択可。

- 面で登録する場合（面に機能を持たせたいときに便利。ファンなど）
  1. 「登録の対象」を「選択されている面」に切り替える
  2. 登録したい面を選択して登録していく

7. 終わったら次へ

## 閉空間・領域の設定（空気）
1. 領域ダイアログを再度開く
2. 「登録の対象」を「選択されている面」に切り替える
3. 空気の流入口を選択して「inlet」として登録する
4. 空気の流出口を選択して「outlet」として登録する
5. 空気の壁にあたる部分を選択して「wall」として登録する
6. （任意）空気の地面にあたる部分を選択して「road」として登録する
7. 作業が完了したらダイアログを閉じて「モデルモードへ」移行する
8. 保存するかを聞かれるので、名前をつけて保存する

## 材質（物性値）の設定
1. 画面左の「モデル -> MAT」を開く
2. 材質が設定されていない領域を一括選択し、材質を設定する
